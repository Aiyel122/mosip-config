import hudson.EnvVars;
import hudson.slaves.EnvironmentVariablesNodeProperty;
import hudson.slaves.NodeProperty;
import hudson.slaves.NodePropertyDescriptor;
import hudson.util.DescribableList;
import jenkins.model.Jenkins;
node {
 // def mvnHome = tool name: 'M2_HOME', type: 'maven'
 def branch = 'master'
 def newVersion = 20
 // Asking user if he wants to start a new sprint, user will choose either proceed or abort
 stage('checkout') {
  // input 'Do you want to start a new Sprint?'
  dir(branch) {
   checkout([$class: 'GitSCM',
    branches: [
     [name: branch]
    ],
    userRemoteConfigs: [
     [url: 'https://github.com/mosip/mosip-configuration.git', credentialsId: 'e80f93ea-49d6-46b6-87df-f7d02dc0e1cf']
    ]
   ])
  }
 }
stage('GIT - Create new branch') {
  dir(branch) {
   sh "git checkout ${newVersion}"
   sh "git add ."
   sh "git commit -m 'new branch created'"
   git url: "https://github.com/mosip/mosip-configuration.git",
    credentialsId: 'e80f93ea-49d6-46b6-87df-f7d02dc0e1cf',
    branch: master
   //sshagent(['e80f93ea-49d6-46b6-87df-f7d02dc0e1cf']) {
    sh "git push origin ${newVersion}"
    //}
  }
}
}
